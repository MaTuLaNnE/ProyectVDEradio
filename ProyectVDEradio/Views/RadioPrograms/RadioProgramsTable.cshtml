@model List<ProyectVDEradio.Models.RadioPrograms>
@{
    ViewBag.Title = "RadioProgramsTable";
}

@functions{
    public string GetDayName(int day)
    {
        switch (day)
        {
            case 0: return "Domingo";
            case 1: return "Lunes";
            case 2: return "Martes";
            case 3: return "Miércoles";
            case 4: return "Jueves";
            case 5: return "Viernes";
            case 6: return "Sábado";
            default: return "¿?";
        }
    }
}

<h2 class="mb-4">Gestión de Programas de Radio</h2>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Imagen</th>
            <th>Descripción</th>
            <th>Horario</th>
            <th>Conductores</th>
            <th>Días</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var program in Model)
        {
            <tr>
                <td>@program.ProgramName</td>
                <td>
                    @if (!string.IsNullOrEmpty(program.Image))
                    {
                        <img src="@program.Image" alt="Imagen" style="max-height: 50px;" />
                    }
                    else
                    {
                        <span class="text-muted">Sin imagen</span>
                    }
                </td>
                <td>@program.Description</td>
                <td>@program.StartTime.ToString(@"hh\:mm") - @program.EndTime.ToString(@"hh\:mm")</td>
                <td>
                    @string.Join(", ", program.ProgramHosts.Select(h => h.Hosts.HostName))
                </td>
                <td>
                    @if (program.ProgramDays != null && program.ProgramDays.Any())
                    {
                        string.Join(", ", program.ProgramDays.Select(d => GetDayName(d.WeekDay)));
                    }
                    else
                    {
                        <em>Sin días</em>
                    }
                </td>
                <td>
                    @Html.ActionLink("✏️ Editar", "Edit", new { id = program.ProgramId }, new { @class = "btn btn-sm btn-warning" })
                    @Html.ActionLink("🗑️ Eliminar", "Delete", new { id = program.ProgramId }, new { @class = "btn btn-sm btn-danger", onclick = "return confirm('¿Seguro que deseas eliminar este programa?');" })
                </td>
            </tr>
        }
    </tbody>
</table>